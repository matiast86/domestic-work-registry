<!DOCTYPE html>
<html
  lang="es"
  xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{fragments/layout}"
>
  <head>
    <title>Mis Contratos</title>
    <link rel="stylesheet" th:href="@{/css/dashboard.css}" />
  </head>

  <body>
    <div layout:fragment="content">
      <!-- Page Header -->
      <div class="section-header" style="margin-bottom: 2rem">
        <h1 class="section-title" style="font-size: 2rem; margin: 0">
          <i class="bi bi-file-earmark-text-fill"></i>
          Mis Contratos
        </h1>
        <a th:href="@{/contracts/contractForm}" class="btn btn-primary">
          <i class="bi bi-plus-circle-fill me-2"></i>
          Nuevo Contrato
        </a>
      </div>

      <!-- Main Tabs: Empleador / Empleado -->
      <div
        class="modern-tabs"
        id="rolTabs"
        th:if="${!#lists.isEmpty(employerContracts) || !#lists.isEmpty(employeeContracts)}"
      >
        <nav class="nav" role="tablist">
          <button
            class="nav-link active"
            id="employer-tab"
            data-bs-toggle="tab"
            data-bs-target="#employer-content"
            type="button"
            role="tab"
            aria-controls="employer-content"
            aria-selected="true"
            th:if="${!#lists.isEmpty(employerContracts)}"
          >
            <i class="bi bi-briefcase-fill"></i>
            Como Empleador
            <span
              class="badge bg-primary ms-2"
              th:text="${#lists.size(employerContracts)}"
            >
              0
            </span>
          </button>
          <button
            class="nav-link"
            th:classappend="${#lists.isEmpty(employerContracts)} ? 'active'"
            id="employee-tab"
            data-bs-toggle="tab"
            data-bs-target="#employee-content"
            type="button"
            role="tab"
            aria-controls="employee-content"
            aria-selected="false"
            th:if="${!#lists.isEmpty(employeeContracts)}"
          >
            <i class="bi bi-person-badge-fill"></i>
            Como Empleado
            <span
              class="badge bg-primary ms-2"
              th:text="${#lists.size(employeeContracts)}"
            >
              0
            </span>
          </button>
        </nav>
      </div>

      <!-- Tab Content -->
      <div class="tab-content">
        <!-- Employer Content -->
        <div
          class="tab-pane fade show active"
          id="employer-content"
          role="tabpanel"
          aria-labelledby="employer-tab"
          th:if="${!#lists.isEmpty(employerContracts)}"
        >
          <th:block
            th:replace="~{dashboard/fragment :: employerContracts(contracts=${employerContracts})}"
          ></th:block>
        </div>

        <!-- Employee Content -->
        <div
          class="tab-pane fade"
          th:classappend="${#lists.isEmpty(employerContracts)} ? 'show active'"
          id="employee-content"
          role="tabpanel"
          aria-labelledby="employee-tab"
          th:if="${!#lists.isEmpty(employeeContracts)}"
        >
          <th:block
            th:replace="~{dashboard/fragment :: employeeContracts(contracts=${employeeContracts})}"
          ></th:block>
        </div>
      </div>

      <!-- Empty State -->
      <div
        th:if="${#lists.isEmpty(employerContracts) && #lists.isEmpty(employeeContracts)}"
        class="empty-state"
      >
        <div class="empty-state-icon">
          <i class="bi bi-file-earmark-plus"></i>
        </div>
        <h3>No tenés contratos registrados</h3>
        <p>
          Creá tu primer contrato para comenzar a gestionar tu personal
          doméstico de manera organizada y profesional.
        </p>
        <a th:href="@{/contracts/contractForm}" class="btn btn-primary btn-lg">
          <i class="bi bi-plus-circle-fill me-2"></i>
          Crear Primer Contrato
        </a>
      </div>
    </div>
  </body>
</html>
