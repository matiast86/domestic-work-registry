<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <title>Dashboard</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- Navbar -->
    <th:block th:replace="~{fragments/nav :: navbar}"></th:block>
    <div class="container mt-5">
      <h2 th:text="'Bienvenido, ' + ${user.firstName}"></h2>

      <!-- Tabs -->
      <ul class="nav nav-tabs mt-4" id="dashboardTabs" role="tablist">
        <li class="nav-item">
          <button
            class="nav-link active"
            data-bs-toggle="tab"
            data-bs-target="#profile"
          >
            Perfil
          </button>
        </li>
        <li
          class="nav-item"
          th:if="${user.roles.contains(T(com.springboot.domesticworkregistry.enums.Role).EMPLOYER)}"
        >
          <button
            class="nav-link"
            data-bs-toggle="tab"
            data-bs-target="#employer"
          >
            Contratos como Empleador
          </button>
        </li>
        <li
          class="nav-item"
          th:if="${user.roles.contains(T(com.springboot.domesticworkregistry.enums.Role).EMPLOYEE)}"
        >
          <button
            class="nav-link"
            data-bs-toggle="tab"
            data-bs-target="#employee"
          >
            Contratos como Empleado
          </button>
        </li>
      </ul>

      <!-- Tab Content -->
      <div class="tab-content mt-3">
        <!-- Profile tab -->
        <div class="tab-pane fade show active" id="profile">
          <h4>Información Personal</h4>
          <p>
            <strong>Nombre:</strong>
            <span th:text="${user.firstName} + ' ' + ${user.lastName}"></span>
          </p>
          <p><strong>Email:</strong> <span th:text="${user.email}"></span></p>
          <p>
            <strong>Teléfono:</strong> <span th:text="${user.phone}"></span>
          </p>
          <p>
            <strong>Dirección:</strong>
            <span
              th:text="${user.address != null ? user.address.street + ' ' + user.address.number : 'N/A'}"
            ></span>
          </p>
          <p>
            <strong>Roles:</strong>
            <span
              th:each="role : ${user.roles}"
              th:text="${role}"
              class="badge bg-info text-dark me-2"
            ></span>
          </p>
        </div>

        <!-- Employer contracts -->
        <div class="tab-pane fade" id="employer"></div>

        <!-- Employee contracts -->
        <div class="tab-pane fade" id="employee"></div>
      </div>
    </div>

    <th:block th:replace="~{fragments/footer :: footer}"></th:block>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script th:src="@{/js/dashboard.js}"></script>
  </body>
</html>
