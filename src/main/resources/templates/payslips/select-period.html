<!DOCTYPE html>
<html
  lang="es"
  xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{fragments/layout}"
>
  <head>
    <title>Seleccionar Período - Generar Recibo</title>
    <th:block layout:fragment="styles">
      <link rel="stylesheet" th:href="@{/css/payslips.css}" />
    </th:block>
  </head>

  <body>
    <div layout:fragment="content">
      <div class="payslip-form-container">
        <!-- Header -->
        <div class="payslip-header fade-in">
          <div class="payslip-icon">
            <i class="bi bi-file-earmark-text-fill"></i>
          </div>
          <h1>Generar Recibo de Sueldo</h1>
          <p>Seleccioná el período para el cual querés generar el recibo</p>
        </div>

        <!-- Period Selection Card -->
        <div class="period-card slide-in">
          <form
            th:action="@{/payslips/create/{contractId}(contractId=${contractId})}"
            method="get"
          >
            <div class="period-form-group">
              <div class="form-group">
                <label for="month" class="form-label">
                  <i class="bi bi-calendar-month me-2"></i>
                  Mes
                </label>
                <select
                  id="month"
                  name="month"
                  class="form-select form-select-lg"
                  required
                >
                  <option value="">-- Seleccione un mes --</option>
                  <option
                    th:each="m : ${T(java.time.Month).values()}"
                    th:value="${m.value}"
                    th:text="${m.getDisplayName(T(java.time.format.TextStyle).FULL, T(java.util.Locale).of('es'))}"
                    th:selected="${m.value == T(java.time.LocalDate).now().monthValue}"
                  ></option>
                </select>
              </div>

              <div class="form-group">
                <label for="year" class="form-label">
                  <i class="bi bi-calendar-year me-2"></i>
                  Año
                </label>
                <input
                  type="number"
                  id="year"
                  name="year"
                  th:value="${T(java.time.LocalDate).now().year}"
                  min="2020"
                  max="2030"
                  class="form-control form-control-lg"
                  required
                />
              </div>
            </div>

            <!-- Info Box -->
            <div class="info-box">
              <i class="bi bi-info-circle-fill"></i>
              <div>
                <strong>Importante:</strong>
                <p class="mb-0">
                  Asegurate de haber registrado todas las tareas y asistencias
                  del período antes de generar el recibo.
                </p>
              </div>
            </div>

            <!-- Actions -->
            <div class="period-actions">
              <a
                th:href="@{/contracts/details/{id}(id=${contractId})}"
                class="btn btn-outline-secondary btn-lg"
              >
                <i class="bi bi-arrow-left me-2"></i>
                Cancelar
              </a>
              <button type="submit" class="btn btn-primary btn-lg">
                Continuar
                <i class="bi bi-arrow-right ms-2"></i>
              </button>
            </div>
          </form>
        </div>

        <!-- Quick Actions -->
        <div class="quick-actions-card">
          <h3 class="quick-actions-title">
            <i class="bi bi-lightning-fill me-2"></i>
            Accesos Rápidos
          </h3>
          <div class="quick-actions-grid">
            <a
              th:href="@{/jobs/jobList/{id}(id=${contractId})}"
              class="quick-action-item"
            >
              <div class="quick-action-icon">
                <i class="bi bi-clock-history"></i>
              </div>
              <div class="quick-action-content">
                <div class="quick-action-label">Ver Tareas</div>
                <div class="quick-action-desc">Verificar horas trabajadas</div>
              </div>
            </a>

            <a
              th:href="@{/attendance/view/{scheduleId}(scheduleId=${scheduleId})}"
              class="quick-action-item"
              th:if="${scheduleId != null}"
            >
              <div class="quick-action-icon">
                <i class="bi bi-calendar-check"></i>
              </div>
              <div class="quick-action-content">
                <div class="quick-action-label">Ver Asistencias</div>
                <div class="quick-action-desc">Revisar días trabajados</div>
              </div>
            </a>

            <a
              th:href="@{/payslips/list/{contractId}(contractId=${contractId})}"
              class="quick-action-item"
            >
              <div class="quick-action-icon">
                <i class="bi bi-file-earmark-text"></i>
              </div>
              <div class="quick-action-content">
                <div class="quick-action-label">Recibos Anteriores</div>
                <div class="quick-action-desc">Ver histórico</div>
              </div>
            </a>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
